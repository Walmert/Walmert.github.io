"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47626],{88805:function(t,e,i){i.d(e,{b:function(){return s}});var o=i(10016),n=i(52406),a=i(79497);function s(){const t=(0,o.yh)(),{0:e,1:i}=(0,n.useState)(!1);return(0,n.useEffect)((()=>{t((0,a.v)().moatIvt).then((()=>{i(!0)}))}),[t]),e}},85229:function(t,e,i){i.d(e,{H:function(){return c}});var o=i(58740),n=i(52406),a=i(82510),s=i(79497),r=i(73382);function c(t){const e=(0,n.useMemo)((()=>o.Y.uuids().includes(t.uuId)),[t.uuId]),i=(0,n.useMemo)((()=>(0,a.U2)("wm_client_ip")),[]);return(0,r.F)((()=>{o.Y.rendered(t)})),(0,n.useMemo)((()=>{const o=i===t.metaData.dfpParams.clientIp;return(0,s.v)().displayCheckIp&&!o?"ip-mismatch":!(!(0,s.v)().displayPreviousRenderCheck||!e)&&"dup-render"}),[i,t.metaData.dfpParams.clientIp,e])}},34831:function(t,e,i){i.d(e,{a:function(){return o}});const o=()=>{let t,e;return"undefined"!==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.getElementsByTagName("body")[0].clientWidth,e=document.getElementsByTagName("body")[0].clientHeight),[t,e]}},61437:function(t,e,i){i.d(e,{r:function(){return x}});var o=i(79497),n=i(67255),a=i(57615),s=i(52406),r=i(18513),c=i(82301),l=i.n(c);var u=(t,e)=>{let i=!1;return(...o)=>{i||(i=!0,setTimeout((()=>{t(...o),i=!1}),e))}};var d=(t=>(...e)=>{let i=[];const o=u((()=>{for(let e=0;e<i.length;e++)try{i[e]()}catch(t){0}}),t);return e.forEach((t=>{document.addEventListener(t,o)})),t=>(i.push(t),()=>{i=i.filter((e=>e!==t))})})(10)("visibilitychange");var m=t=>t?(t.forEach((t=>{clearTimeout(t)})),[]):[];const T="viewabilityMRCTimeout";let w,h,f,g,C;!function(t){t.moat="moat",t.ias="ias",t.doubleverify="doubleverify"}(w||(w={})),function(t){t.AD_IMPRESSION="AD_IMPRESSION",t.CLICK="CLICK",t.TOUCH="TOUCH",t.MRC_VIEWABLE="MRC_VIEWABLE",t.UNLOAD="UNLOAD"}(h||(h={})),function(t){t.GROUPM_VIEWABLE="GROUPM_VIEWABLE",t.PERIODIC_UPDATE="AD_STATUS"}(f||(f={})),function(t){t.AD_IMPRESSION="adImpression",t.AD_VIEWABLE="adViewable",t.AD_TOUCH="adTouch",t.AD_CLICK="adClick",t.AD_REMOVE="adRemove"}(g||(g={})),function(t){t.AD_VIEWABLE_GM="adViewableGm",t.AD_STATUS="adStatus"}(C||(C={}));const p=.5,b=1e3,I=(t,e)=>{let i=!1;const o=t.trackingState,n=t.commonTrackingTimeoutList.viewabilityMRCTimeout;n.length&&(t.commonTrackingTimeoutList.viewabilityMRCTimeout=m(n)),o.viewabilityMRC||(o.viewabilityMRC=!0,i=!0,t.beaconUtil.fire(h.MRC_VIEWABLE,g.AD_VIEWABLE)),i&&e(w.moat,o,"viewabilityMRC")};var y=(t,e,i)=>{const o=e.commonTrackingTimeoutList.viewabilityMRCTimeout;t.intersectionRatio>=p?o.push(window.setTimeout(I,b,e,i)):e.commonTrackingTimeoutList.viewabilityMRCTimeout=m(o)};const V="viewabilityMRCStatusTimeout",P="groupMViewableTimeout",k="publicisFullInViewOTSTimeout",M=[5,10,15,30,60,120,180],v={[h.AD_IMPRESSION]:0,[h.CLICK]:2,[h.TOUCH]:23,[h.MRC_VIEWABLE]:5,[f.GROUPM_VIEWABLE]:9,[f.PERIODIC_UPDATE]:-1,[h.UNLOAD]:21},S=(t,e=0,i=0)=>{if(t.windowNotVisibleTime)return t.windowNotVisibleTime-e;const o=Date.now();let n=i;return n=o-e+n,t.windowVisibleTimes.forEach((t=>{if(t.notVisible&&t.visible&&t.notVisible>e){const e=t.visible-t.notVisible;n-=e}})),n},A=(t,e=0)=>{const i=t.windowNotVisibleTime||Date.now();let o=i-e;const n=t.windowVisibleTimes.length,a=t.windowVisibleTimes[n-1]&&t.windowVisibleTimes[n-1].visible;return a&&e<a?i-a:(t.windowVisibleTimes.forEach((t=>{if(t.notVisible&&t.visible&&t.notVisible>e){const e=t.visible-t.notVisible;o-=e}})),o)},E=(t,e,i,o,n)=>{for(let a=0;a<t.length;a++){const s=t[a]-o/1e3;if(s>=0){e.trackingTimeoutList[i].push(setTimeout(n,1e3*s))}}},L=t=>{const e=t.trackingTimeoutList.viewabilityMRCStatusTimeout;e.length&&(t.trackingTimeoutList.viewabilityMRCStatusTimeout=m(e)),E(M,t,V,t.mrcTotalPeriodicTime,(()=>{t.beaconUtil.fire(h.MRC_VIEWABLE,C.AD_STATUS)}))};var D=(t,e)=>{const i=e.trackingTimeoutList.viewabilityMRCStatusTimeout;t.intersectionRatio>=p?i.push(window.setTimeout(L,b,e)):e.trackingTimeoutList.viewabilityMRCStatusTimeout=m(i)};var O=(t,e,i)=>{let o=!1;const n=e.trackingState;t.intersectionRatio>=p?e.startMrcViewTime||(e.startMrcViewTime=Date.now()):e.startMrcViewTime?(n.totalMrcViewTime=S(e,e.startMrcViewTime,n.totalMrcViewTime),o=!0,e.mrcTotalPeriodicTime=Date.now()-e.startMrcViewTime+e.mrcTotalPeriodicTime,e.startMrcViewTime=0):e.startMrcViewTime=0,o&&i(w.moat,n,"totalMrcViewTime")};const R=(t,e)=>{let i=!1;const o=t.trackingState,n=t.trackingTimeoutList.groupMViewableTimeout;n.length&&(t.trackingTimeoutList.groupMViewableTimeout=m(n)),o.groupMViewable||(o.groupMViewable=!0,i=!0,t.beaconUtil.fire(f.GROUPM_VIEWABLE,C.AD_VIEWABLE_GM)),i&&e(w.moat,o,"groupMViewable"),E(M,t,P,t.groupMTotalPeriodicTime,(()=>{t.beaconUtil.fire(f.GROUPM_VIEWABLE,C.AD_STATUS)}))};var _=(t,e,i)=>{const o=e.trackingState.isAdLarge?p:1,n=e.trackingTimeoutList.groupMViewableTimeout;t.intersectionRatio>=o?n.push(window.setTimeout(R,b,e,i)):e.trackingTimeoutList.groupMViewableTimeout=m(n)};var U=(t,e,i)=>{let o=!1;const n=e.trackingState,a=Date.now();if(n.totalFiftyPctContTime||(n.totalFiftyPctContTime=0),t.intersectionRatio>=p)e.startFiftyPctContTime||(e.startFiftyPctContTime=a);else if(e.startFiftyPctContTime){const t=A(e,e.startFiftyPctContTime);(!n.totalFiftyPctContTime||t>n.totalFiftyPctContTime)&&(n.totalFiftyPctContTime=t,o=!0),e.startFiftyPctContTime=0}else e.startFiftyPctContTime=0;o&&i(w.moat,n,"totalFiftyPctContTime")};var F=(t,e,i)=>{let o=!1;const n=e.trackingState,a=Date.now();if(e.startHundredPctContTime||(e.startHundredPctContTime=0),t.intersectionRatio>=1)e.startHundredPctContTime||(e.startHundredPctContTime=a);else if(e.startHundredPctContTime){const t=A(e,e.startHundredPctContTime);(!n.totalHundredPctContTime||t>n.totalHundredPctContTime)&&(n.totalHundredPctContTime=t,o=!0),e.startHundredPctContTime=0}else e.startHundredPctContTime=0;o&&i(w.moat,n,"totalHundredPctContTime")};var H=(t,e,i)=>{let o=!1;const n=e.trackingState;t.intersectionRatio>=1?e.startFullInViewOTS||(e.startFullInViewOTS=Date.now()):e.startFullInViewOTS?(n.fullInViewOTS=S(e,e.startFullInViewOTS,n.fullInViewOTS),o=!0,e.groupMTotalPeriodicTime=Date.now()-e.startFullInViewOTS+e.groupMTotalPeriodicTime,e.startFullInViewOTS=0):e.startFullInViewOTS=0,o&&i(w.moat,n,"fullInViewOTS")};const B=(t,e)=>{const i=t.trackingState,o=t.trackingTimeoutList.publicisFullInViewOTSTimeout;o.length&&(t.trackingTimeoutList.publicisFullInViewOTSTimeout=m(o)),i.publicisFullInViewOTS=!0,e(w.moat,i,"publicisFullInViewOTS")};var N=(t,e,i)=>{const o=e.trackingState;if(!o.publicisFullInViewOTS){const n=e.trackingTimeoutList.publicisFullInViewOTSTimeout,a=o.isAdLarge?.3:1;t.intersectionRatio>=a?n.push(window.setTimeout(B,b,e,i)):e.trackingTimeoutList.publicisFullInViewOTSTimeout=m(n)}};var W=i(34831),Z=i(58133);const z=(t,e,i,o)=>{const n=S(t,e,i);return e?n:i||o},G=(t,e,i,o)=>{const n=A(t,e);return e&&n>i?n:i||o};var K=(t,e)=>{const i=Date.now(),o=t.trackingState;o.eventTypeCount[e]++;const n=Number(t.element.offsetHeight),a=Number(t.element.offsetWidth),[s,r]=(0,W.a)(),c=i-o.adLoadedTime,l=o.adLoadedTime,u=z(t,t.startMrcViewTime,o.totalMrcViewTime,0),d=z(t,t.startFullInViewOTS,o.fullInViewOTS,0),m=G(t,t.startFiftyPctContTime,o.totalFiftyPctContTime,0),T=G(t,t.startHundredPctContTime,o.totalHundredPctContTime,0),{adIds:w,adLocation:f,assetUrl:g,dfpTag:C,framework:p,pageType:b,random:I,adUnitId:y,categoryId:V}=t.getAdCustomInfo(),P=null!=y?y:"0",k=null!=V?V:"0",M={ac:1,bq:0,fr:1,i:"production"===(0,Z.default)().publicRuntimeConfig.profile?"WALMART_DISPLAY_S2S1":"WALMART_DISPLAY_S2SQA1",sl:1,e:v[e],ag:u,ak:g,d:w,gu:window.location.href,ia:m,gh:1,gf:d,h:n,ic:T,fq:1,de:I,qb:r,qa:s,t:l,m:c,q:o.eventTypeCount[e]-1,w:a,zMoatAdLocation:f,zMoatAdUnit1:C,zMoatAdUnit2:b,zMoatAdUnitId:P,zMoatCategoryId:k,zMoatXpa:`fw=${p}`,..."function"===typeof window.f?window.f():{}},S=(t,e,i=1)=>{e&&(M[t]=i)};return S("in",o.groupMViewable),S("gi",o.groupMViewable),S("as",o.viewabilityMRC),S("pd",o.publicisFullInViewOTS),S("c",t.touchOrClickTimeOffset,t.touchOrClickTimeOffset),S("tc",e===h.CLICK,o.eventTypeCount[e]),{payload:M}};class $ extends class{constructor(t,e,i,o){(0,r.Z)(this,"windowVisibleTimes",[]),(0,r.Z)(this,"windowNotVisibleTime",null),(0,r.Z)(this,"touchOrClickTimeOffset",void 0),(0,r.Z)(this,"commonTrackingTimeoutList",{[T]:[]}),(0,r.Z)(this,"element",void 0),(0,r.Z)(this,"displayAdProps",void 0),(0,r.Z)(this,"trackingState",void 0),(0,r.Z)(this,"beaconUtil",void 0),(0,r.Z)(this,"onClickHandler",void 0),this.element=t,this.displayAdProps=e,this.trackingState=i,this.beaconUtil=o,this.trackingState.adLoadedTime=Date.now(),this.touchOrClickTimeOffset=0,this.trackingState.isAdLarge=this.adSizeCheck(),this.onClickHandler=this.onClick.bind(this)}onClick(){this.beaconUtil.fire(h.CLICK,g.AD_CLICK),this.element instanceof HTMLIFrameElement||this.element.removeEventListener("click",this.onClickHandler)}initialize(){this.beaconUtil.fire(h.AD_IMPRESSION,g.AD_IMPRESSION),l()((t=>{this.element.id===t.id&&"click"===t.type&&this.onClick()})),this.element instanceof HTMLIFrameElement||this.element.addEventListener("click",this.onClickHandler),d((()=>{"visible"!==document.visibilityState?this.windowNotVisibleTime=Date.now():"visible"===document.visibilityState&&(this.windowVisibleTimes.push({notVisible:this.windowNotVisibleTime,visible:Date.now()}),this.windowNotVisibleTime=null)}))}getBaseTrackers(){return[y]}adSizeCheck(){return Number(this.element.offsetHeight)*Number(this.element.offsetWidth)>=242500}unmount(){for(const t of Object.values(this.commonTrackingTimeoutList))m(t);this.beaconUtil.fire(h.UNLOAD,g.AD_REMOVE)}}{constructor(t,e,i,o){super(t,e,i,o),(0,r.Z)(this,"startMrcViewTime",0),(0,r.Z)(this,"startFiftyPctContTime",0),(0,r.Z)(this,"startHundredPctContTime",0),(0,r.Z)(this,"startFullInViewOTS",0),(0,r.Z)(this,"mrcTotalPeriodicTime",0),(0,r.Z)(this,"groupMTotalPeriodicTime",0),(0,r.Z)(this,"trackingTimeoutList",{[V]:[],[P]:[],[k]:[]}),o.attachTracker(this,w.moat),this.initialize()}initialize(){super.initialize()}getAdCustomInfo(){const{advertiserID:t,orderID:e,desktopImage:i,mobileImage:o,desktopLogo:n,mobileLogo:a,adUnitID:s,mainImage:r,logoImage:c,metaData:l}=this.displayAdProps,u=null==l?void 0:l.dfpResponse,d=null==l?void 0:l.dfpParams,m=null==u?void 0:u.googleLineitemId,T=null==u?void 0:u.googleCreativeId,w=null==d?void 0:d.dfpTag,h=null==d?void 0:d.targeting,f=null==h?void 0:h.location,g=null==h?void 0:h.categoryId,C=null==h?void 0:h.ptype,p=null==h?void 0:h.framework;return{adIds:t&&e&&m&&T?`${t}:${e}:${m}:${T}`:void 0,adLocation:f,adUnitId:s,assetUrl:i||o||n||a||r||c,categoryId:g,dfpTag:w&&w.split("/")[2],framework:p,pageType:C,random:this.displayAdProps.metaData.dfpParams.targeting.sessId}}unmount(){for(const t of Object.values(this.trackingTimeoutList))m(t);super.unmount()}getTrackers(){return[H,N,D,O,U,_,F]}getPayload(t){return K(this,t)}}var q=i(58740);class Y{constructor(t,e,i,o){(0,r.Z)(this,"adUuid",void 0),(0,r.Z)(this,"commonDisplayAdPayload",void 0),(0,r.Z)(this,"trackingStates",void 0),(0,r.Z)(this,"onBeacon",void 0),(0,r.Z)(this,"trackers",void 0),this.adUuid=t,this.commonDisplayAdPayload=e,this.trackingStates=i,this.onBeacon=o,this.trackers=new Map}attachTracker(t,e){this.trackers.set(e,t)}payloadCheck(t){const e=Object.keys(t);for(let i=0;i<e.length;i++)if(void 0===t[e[i]])return!1;return!0}fire(t,e){const i={...this.commonDisplayAdPayload.metaData.beaconDebug||{},adSource:"S2S",ip:this.commonDisplayAdPayload.metaData.dfpParams.clientIp,s:this.adUuid,t:[],ignore:!1},o={};let n=!1;switch(t){case h.AD_IMPRESSION:case h.CLICK:case h.TOUCH:case h.MRC_VIEWABLE:case h.UNLOAD:this.trackers.forEach(((e,a)=>{const{payload:s}=e.getPayload(t);this.payloadCheck(s)&&(i.t.push(a),o[a]=s,n=!0)}));break;case f.GROUPM_VIEWABLE:case f.PERIODIC_UPDATE:{const e=this.trackers.get(w.moat);if(e){const{payload:a}=e.getPayload(t);this.payloadCheck(a)&&(i.t.push(w.moat),o[w.moat]=a,n=!0)}break}}if(!n)return;const a={mt:i,pl:o};q.Y.sendBeacon({context:"displayWlmt",action:"ads",name:e,payload:a}),this.onBeacon&&this.onBeacon(a)}}const x=({elementRef:t,commonDisplayAdPayload:e,track3PEnable:i,onBeacon:r,dbg:c})=>{(({target:t,commonDisplayAdPayload:e,track3PEnable:i,onBeacon:r,dbg:c})=>{const l={rootMargin:(0,o.v)().adViewableGmBeaconCheck?"0px":n.c.rootMargin,threshold:[0,.3,p,1]},u=(0,s.useMemo)((()=>(t=>{const e={};return t&&(e.moat={adLoadedTime:0,isAdLarge:!1,viewabilityMRC:!1,groupMViewable:!1,totalMrcViewTime:0,totalFiftyPctContTime:0,totalHundredPctContTime:0,publicisFullInViewOTS:!1,fullInViewOTS:0,eventTypeCount:{AD_IMPRESSION:0,CLICK:0,MRC_VIEWABLE:0,GROUPM_VIEWABLE:0,PERIODIC_UPDATE:0,TOUCH:0,UNLOAD:0}}),e})(i)),[i]),{0:d,1:m}=(0,s.useState)(t.current);(0,s.useEffect)((()=>{m(t.current)}),[t,m]);const T=(0,s.useMemo)((()=>e.uuId||""),[e]),w=(0,s.useRef)(new Y(T,e,u,r)),h=(0,s.useRef)(null);(0,s.useEffect)((()=>{i&&d&&!h.current&&(h.current=new $(d,e,u.moat,w.current))}),[e,d,i,u.moat]),(0,s.useEffect)((()=>()=>{h.current&&h.current.unmount()}),[]);const f=(0,s.useCallback)(((t,e,i)=>{(0,a.L)({payload:{state:e},type:"GLASS_3P_AD_UPDATE",meta:{stateChange:`${t}:${i}`,id:T}})}),[T]),g=(0,s.useCallback)((t=>{if(h.current&&i){const e=h.current.getTrackers(),i=h.current.getBaseTrackers();e.forEach((e=>{e(t,h.current,f)})),i.forEach((e=>{e(t,h.current,f)}))}}),[i,f]);(0,n.P)(t,g,l,{dbg:!0,auxData:{adType:"display",displayAd:e,dbg:c}})})({commonDisplayAdPayload:e,target:t,track3PEnable:i,onBeacon:r,dbg:c})}}}]);