(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42246],{50461:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var i=n(30567),a=n(94358),o=n.n(a),s=n(21206),u=n.n(s),r=n(61613);const l=e=>{const{className:t,...n}=(0,r.p)(e,l);return(0,i.jsx)("span",{className:o()(u().visuallyHidden,t),...n})};l.displayName="VisuallyHidden"},54887:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});const i=(e,t,n)=>1===e?t:n||`${t}s`},33890:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});const i="https://i5.walmartimages.com/dfw/4ff9c6c9-64e4/k2-_cf34b75a-7d8e-44a1-935c-2b5bc9bb031c.v1.jpg",a=({src:e,height:t,width:n,background:a="FFFFFF",quality:o})=>{if(!t||!n)return e||i;const[s,u]=(e||i).split("?"),r=new URLSearchParams(u||"");return r.set("odnHeight",t),r.set("odnWidth",n),r.set("odnBg",a),o&&r.set("odnDynImageQuality",o),`${s}?${r.toString()}`}},40836:function(e,t,n){"use strict";n.r(t),n.d(t,{QueuingLayoutWrapper:function(){return Q},default:function(){return D.Z},getQueueFooterProps:function(){return v},getQueueProps:function(){return p},useQueueBanner:function(){return k},useShouldRenderQueue:function(){return x}});var i=n(30919),a=n(11907),o=n(3705),s=n(30301),u=n(52406),r=n(4368);var l=n(54887),m=n(27388),c=n(87748);const d=e=>e.filter((e=>{return"valid"===e.state&&(t=e.expires,Math.trunc(t-Date.now())<c.t_);var t})),p=(e,{onOpenLeaveQueueDialog:t},n)=>"valid"===e.state?{leaveQueueProps:{text:"Leave",onClick:t},timerProps:{endTime:g(e.expires),message:"to purchase",ticketState:e.state},ctaProps:{onClick:(t,i,a)=>()=>{i(((e,t,n)=>({context:n,action:"onClick",name:"viewItem",payload:{nm:{nm:"viewItem"},li:{nm:"viewItem"},ta:t?{ov:"lineDetails"}:{mn:"queueIt"},pr:{us:e.customMetadata.item.itemID,wt:6e4*new Date(e.expires).getMinutes()}}}))(e,a,n)),t(e.customMetadata.item.itemURL)}}}:"pending"===e.state||"paused"===e.state?{leaveQueueProps:{text:"Leave",onClick:t},timerProps:{endTime:g(e.expectedTurnTimeUnixTimestamp),message:"estimated wait",onClick:(t,i,a)=>()=>{i(((e,t,n)=>{var i;return{context:n,action:"onClick",name:"estimatedWait",payload:{nm:{nm:"estimatedWait"},li:{nm:"estimatedWait"},ta:t?{ov:"lineDetails"}:{mn:"queueIt"},pr:{us:e.customMetadata.item.itemID,qp:(0,r.H)(null==e||null==(i=e.customMetadata)?void 0:i.admissionLikelihood),wt:6e4*new Date(e.expectedTurnTimeUnixTimestamp).getMinutes()}}}})(e,a,n)),t((0,m.$)(e))},ticketState:e.state}}:"error"===e.state&&"TICKET_EXPIRED"===e.errorCode?{leaveQueueProps:{text:"Remove",onClick:t},timerProps:{message:"Time expired",ticketState:e.state}}:{},v=(e,t,{isDisplayedQueueTicketUnder2Minutes:n,onOpenQueueDialog:i})=>{const a=t.length;if(1===a&&"valid"===e.state)return n?{message:"Less than 2 minutes to purchase"}:{message:"Whoo hoo- the wait is over!"};if(a>1){const e=d(t);if(e.length>2)return{message:"Less than 2 minutes left for 1 or more items",onClick:i};if(2===e.length)return{message:"Less than 2 minutes left for 1 item",onClick:i};const n=a-1;return{message:`You're in line for ${n} other ${(0,l._)(n,"item")}`,onClick:i}}},g=e=>new Date(e),k=()=>{const{pageTitle:e}=(0,u.useContext)(a.z1),{0:t,1:n}=(0,u.useState)(!1),{0:l,1:m}=(0,u.useState)(null),{0:c,1:d}=(0,u.useState)(!1),{queueError:g,removeTicketByQueueValue:k,activeTicketsByExpiryTime:C,isErrorInQueueTickets:x,isDisplayedQueueTicketUnder2Minutes:D,displayedQueueTicket:L}=(0,o.B)(),Q=(0,i.wG)(),T=Boolean(g)||x,f=(t,n)=>{"error"!==t.state&&Q(((e,t,n)=>{var i;return{context:n,action:"onClick",name:"leaveLine",payload:{nm:{nm:"leaveLine"},li:{nm:"leaveLine"},ta:t?{ov:"lineDetails"}:{mn:"reservationTimer"},pr:{us:e.customMetadata.item.itemID,qp:(0,r.H)(null==e||null==(i=e.customMetadata)?void 0:i.admissionLikelihood),wt:"pending"===e.state||"paused"===e.state?6e4*new Date(e.expectedTurnTimeUnixTimestamp).getMinutes():6e4*new Date(e.expires).getMinutes()}}}})(t,n,e)),m(t)},h=()=>{Q((e=>({context:e||"queueing",action:"onClick",name:"dismiss",payload:{nm:{nm:"dismiss"},li:{nm:"dismiss"},ta:{ov:"leaveLineConfirm",pt:e||"waitingRoom"}}}))(e)),m(null)},[w,{status:y}]=(0,s.p)({onSuccess:(e,t)=>{k(t),h()},onError:()=>{d(!0)}}),P=()=>n(!0),M={isError:c,isLeaveDialogueLoading:"loading"===y,onDismissError:()=>d(!1),queueError:g,onConfirmLeaveQueue:async e=>{await w(e.queue)},onCloseLeaveQueue:h,onStayInLine:()=>{Q((e=>({context:e||"queueing",action:"onClick",name:"stayInLine",payload:{nm:{nm:"stayInLine"},li:{nm:"stayInLine"},ta:{ov:"leaveLineConfirm",pt:e||"waitingRoom"}}}))(e)),m(null)},onOpenLeaveQueueDialog:f,onCloseQueueDialog:()=>{Q((e=>({context:e,action:"onClick",name:"dismiss",payload:{nm:{nm:"dismiss"},li:{nm:"dismiss"},ta:{ov:"lineDetails"}}}))(e)),n(!1)},displayedQueueTicket:L,queueTickets:C,isQueueDialogOpen:t,ticketToLeave:l,shouldRenderError:T};return L?{...M,...p(L,{onOpenLeaveQueueDialog:f},e),footerProps:v(L,C,{isDisplayedQueueTicketUnder2Minutes:D,onOpenQueueDialog:P})}:M};var C=n(31842);const x=()=>{const{asPath:e}=(0,C.useRouter)(),{queueData:t}=(0,o.B)(),n=e.includes("cart"),i=e.includes("bookslot"),a=e.includes("/qp");return(0,u.useMemo)((()=>t&&!(0===t.length||n||i||a||t.some((t=>t&&"customMetadata"in t&&(t.customMetadata.item.itemURL===e||(null==e?void 0:e.includes(t.customMetadata.item.itemID))))))),[e,n,i,a,t])};var D=n(32488),L=n(30567);const Q=()=>{const{pageTitle:e}=(0,u.useContext)(a.z1),{push:t}=(0,C.useRouter)(),{footerProps:n,ctaProps:o,leaveQueueProps:s,timerProps:r,isError:l,isLeaveDialogueLoading:m,onDismissError:c,onConfirmLeaveQueue:d,onCloseLeaveQueue:v,onStayInLine:g,onOpenLeaveQueueDialog:Q,onCloseQueueDialog:T,displayedQueueTicket:f,queueTickets:h,isQueueDialogOpen:w,ticketToLeave:y,shouldRenderError:P}=k(),M=(0,i.wG)(),I=x();return I&&P?(0,L.jsx)(D.Z,{float:!0,children:(0,L.jsx)(D.Z.Error,{})}):I&&f&&"customMetadata"in f&&"expires"in f&&s?(0,L.jsx)(i.tp,{context:e,action:"moduleView",name:"reservationTimer",payload:{nm:{nm:"reservationTimer"},li:{nm:"reservationTimer"},pr:{us:f.customMetadata.item.itemID,wt:6e4*new Date(f.expires).getMinutes()},ta:{mo:"reservationTimer"}},children:(0,L.jsxs)(D.Z,{float:!0,children:[(0,L.jsxs)(D.Z.Body,{onClick:()=>s.onClick(f,w),text:s.text,children:[f.customMetadata.item.imageURL&&(0,L.jsx)(D.Z.Image,{name:f.customMetadata.item.name,isQueueFooterOpen:Boolean(null==n?void 0:n.message),src:f.customMetadata.item.imageURL}),r&&(0,L.jsxs)(L.Fragment,{children:[r.endTime&&(0,L.jsx)(D.Z.Timer,{endTime:r.endTime,ticketState:r.ticketState,showClockIcon:!1}),r.message&&(0,L.jsx)(D.Z.TimerMessage,{message:r.message,onClick:r.onClick&&r.onClick(t,M,w)||void 0,className:"white"})]}),(null==o?void 0:o.onClick)&&(0,L.jsx)(D.Z.Cta,{onClick:o.onClick(t,M,w)})]}),n&&(0,L.jsx)(D.Z.Footer,{onClick:n.onClick,message:n.message}),(0,L.jsx)(D.Z.Dialog,{title:`You're in line for ${h.length} items`,isOpen:w,onClose:T,queueTickets:h,children:h.map((n=>{var i;const a=p(n,{onOpenLeaveQueueDialog:Q},e);return a.leaveQueueProps&&"customMetadata"in n&&(0,L.jsxs)(D.Z.Body,{isQueueDialog:!0,onClick:()=>{var e;return null==(e=a.leaveQueueProps)?void 0:e.onClick(n,w)},text:a.leaveQueueProps.text,children:[(0,L.jsx)(D.Z.Image,{isQueueDialog:!0,isQueueFooterOpen:!0,name:n.customMetadata.item.name,src:n.customMetadata.item.imageURL}),a.timerProps&&(0,L.jsxs)(L.Fragment,{children:[a.timerProps.endTime&&(0,L.jsx)(D.Z.Timer,{endTime:a.timerProps.endTime,ticketState:a.timerProps.ticketState,showClockIcon:!1}),a.timerProps.message&&(0,L.jsx)(D.Z.TimerMessage,{isQueueDialog:!0,message:a.timerProps.message,onClick:a.timerProps.onClick&&a.timerProps.onClick(t,M,w)||void 0})]}),(null==(i=a.ctaProps)?void 0:i.onClick)&&(0,L.jsx)(D.Z.Cta,{onClick:a.ctaProps.onClick(t,M,w)})]},n.customMetadata.item.itemID)}))}),(0,L.jsx)(D.Z.LeaveQueueDialog,{isOpen:Boolean(y),isError:l,isLeaveDialogueLoading:m,onClose:v,onStayInLine:g,onDismissError:c,onLeaveQueue:()=>y&&d(y)})]})}):null}},30301:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var i=n(30919),a=n(11907),o=n(9848),s=n(52406),u=n(35968),r=n(22866);const l=e=>{const{pageTitle:t}=(0,s.useContext)(a.z1),n=(0,o.Zl)(),l=(0,i.wG)(),m=null==e?void 0:e.onSuccess,c=null==e?void 0:e.onError;return(0,u.Db)((e=>(0,r.Ch)(n,"discardTicket",e)),{onSuccess:(e,n)=>{l({context:t||"queueing",action:"onClick",name:"leaveLine",payload:{nm:{nm:"leaveLine"},li:{nm:"leaveLine"},ta:{ov:"leaveLineConfirm",pt:t||"waitingRoom"}}}),null==m||m(e,n)},onError:(...e)=>{l({context:t||"queueing",action:"onClick",name:"leaveLine",payload:{nm:{nm:"error"},li:{nm:"leaveLine"},ta:{ov:"leaveLineConfirm",pt:t||"waitingRoom"}}}),null==c||c(...e)}})}},3705:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var i=n(52406),a=n(49413);const o=()=>{const{error:e,itemQueueData:t,setItemQueueData:n,...o}=(()=>{const e=(0,i.useContext)(a.e);if(!e)throw new Error("useQueueContext must be used within ItemQueueContextProvider");return e})(),s=(0,i.useCallback)((e=>{Array.isArray(e)?null==n||n(e):null==n||n([...t,e])}),[t,n]),u=(0,i.useCallback)((e=>{const n=t.filter((t=>t.queue!==e));s(n)}),[t,s]);return{...o,queueData:t,queueError:e,removeTicketByQueueValue:u,setQueueData:n,updateQueueData:s}}},21206:function(e){e.exports={visuallyHidden:"w_Cg"}}}]);